@using Fluxor
@using AniMedia.WebClient.Common.Store
@using AniMedia.WebClient.UIWeb.UserPanel.Shared

@inherits Fluxor.Blazor.Web.Components.FluxorComponent
@layout UserUILayout

@attribute [Route(PageUrlConstants.CounterPageUrl)]
@attribute [Authorize]

<PageTitle>Counter</PageTitle>

<h1>Counter</h1>

<p role="status">Current count: @CounterState.Value.Count</p>

<button class="btn btn-primary" @onclick="IncrementCount">Click me</button>

@code {

    [Inject]
    private IState<CounterState> CounterState { get; set; } = default!;

    [Inject]
    private IDispatcher Dispatcher { get; init; } = default!;
    
    private void IncrementCount() {
        Dispatcher.Dispatch(new IncrementCounterAction {
            IncrementSize = 1
        });
    }
}