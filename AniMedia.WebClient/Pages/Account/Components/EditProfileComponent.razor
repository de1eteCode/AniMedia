@inherits Fluxor.Blazor.Web.Components.FluxorComponent

<div class="container-md">
    <div class="container col-2">
        <div class="row">
            <div class="container col">
                @{
                    var avUid = UserState.Value.AvatarUid;
                    if (avUid is not null && avUid != Guid.Empty) {
                        // Todo: Hardcode fix
                        <img
                            id="@_idImageAvatar"
                            width="150"
                            src=@($"{Configuration["ApiServiceUrl"]}/api/v1/media/file/{avUid}")/>
                    }
                    else {
                        <img id="@_idImageAvatar" width="150" src="resources/default_avatar.jpg"/>
                    }
                }
            </div>
            <div class="container col col-2">
                <div class="col">
                    @if (DoubleBuffer) {
                        <InputFile
                            multiple="false"
                            OnChange="LoadNewAvatarEvent"/>
                    }
                    else {
                        <InputFile
                            multiple="false"
                            OnChange="LoadNewAvatarEvent"/>
                    }
                </div>
                <div class="col">
                    @if (_newAvatar != null) {
                        <button
                            class="btn btn-primary"
                            @onclick='() => UpdateAvatar()'>
                            Обновить
                        </button>
                    }
                    else {
                        <button
                            class="btn btn-primary"
                            disabled>
                            Обновить
                        </button>
                    }
                </div>
            </div>
        </div>
    </div>

    <EditForm Model="_vmUpdateProfile" OnValidSubmit="@UpdateProfile">
        <DataAnnotationsValidator/>

    </EditForm>
</div>